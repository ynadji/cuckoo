# Generated by iptables-save v1.4.14 on Fri Mar  8 19:11:21 2013
*mangle
:PREROUTING ACCEPT [331141:184490367]
:INPUT ACCEPT [280607:141750070]
:FORWARD ACCEPT [39817:40799130]
:OUTPUT ACCEPT [180980:219239674]
:POSTROUTING ACCEPT [220700:260025042]
-A POSTROUTING -o virbr1 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill
COMMIT
# Completed on Fri Mar  8 19:11:21 2013
# Generated by iptables-save v1.4.14 on Fri Mar  8 19:11:21 2013
*filter
:INPUT ACCEPT [10889:7317166]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [9085:13706088]
-A INPUT -i virbr1 -p udp -m udp --dport 53 -j ACCEPT
-A INPUT -i virbr1 -p tcp -m tcp --dport 53 -j ACCEPT
-A INPUT -i virbr1 -p udp -m udp --dport 67 -j ACCEPT
-A INPUT -i virbr1 -p tcp -m tcp --dport 67 -j ACCEPT
# these are rules from larry's original conf
-A INPUT -i lo -j ACCEPT
-A INPUT -p icmp -j ACCEPT
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
-A INPUT -s 72.5.89.0/24 -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -s 72.5.89.0/24 -j ACCEPT
# also allow tyr to access
-A INPUT -s 143.215.130.159 -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -s 143.215.130.159 -j ACCEPT
# allow ddns to access
-A INPUT -s 172.24.20.66 -p tcp -m tcp --dport 22 -j ACCEPT
-A INPUT -s 172.24.20.66 -j ACCEPT
# these two rules allow communication with the router so...
-A FORWARD -s 192.168.0.0/16 -d 192.168.0.1/32 -j ACCEPT
-A FORWARD -s 192.168.0.1/32 -d 192.168.0.0/16 -j ACCEPT
# this rule can, without damaging the network, prevent VMs from speaking to each other
-A FORWARD -s 192.168.0.0/16 -d 192.168.0.0/16 -j REJECT --reject-with icmp-port-unreachable
-A FORWARD -d 192.168.0.0/16 -o virbr1 -j ACCEPT
-A FORWARD -s 192.168.0.0/16 -i virbr1 -j ACCEPT
-A FORWARD -i virbr1 -o virbr1 -j ACCEPT
-A FORWARD -o virbr1 -j REJECT --reject-with icmp-port-unreachable
-A FORWARD -i virbr1 -j REJECT --reject-with icmp-port-unreachable
COMMIT
# Completed on Fri Mar  8 19:11:21 2013
# Generated by iptables-save v1.4.14 on Fri Mar  8 19:11:21 2013
*nat
:PREROUTING ACCEPT [66534:10845170]
:POSTROUTING ACCEPT [2117:148629]
:OUTPUT ACCEPT [2103:147243]
# so we faithfully route traffic. the last argument and eth1 will probably need
# to be changed when porting to other machines
-A POSTROUTING -s 192.168.0.0/16 -o bond0 -j SNAT --to-source 64.95.58.175
COMMIT
# Completed on Fri Mar  8 19:11:21 2013
